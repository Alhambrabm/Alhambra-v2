<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- Configuración para DESHABILITAR completamente el zoom en móviles. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
    <title>Sandwichería La Alhambra - Lomitos y Milanesas</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración personalizada de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-orange': '#ea580c', // Naranja Fuerte
                        'accent-orange': '#f97316', // Naranja Brillante
                        'soft-white': '#fefefe',
                        'highlight-yellow': '#facc15', // Amarillo para destacar las fritas
                        'whatsapp-green': '#25D366', // Color de WhatsApp
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Fuente Inter de Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        /* 1. Fondo Dinámico (Animación de Gradiente Sutil y Leve) */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .dynamic-bg {
            /* Colores muy cercanos para un cambio leve */
            background: linear-gradient(-45deg, #fff7ed, #fefce8, #fef3c7); 
            background-size: 300% 300%; /* Tamaño más grande para movimiento más lento y sutil */
            animation: gradient-shift 20s ease infinite; /* 20s para movimiento muy leve */
        }

        /* 2. Navegación con Efecto Blur */
        .blur-nav {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            background-color: rgba(255, 255, 255, 0.85); /* Blanco semi-transparente */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        
        /* 3. Título con línea fuerte */
        .title-line {
            position: relative;
            display: inline-block;
            padding-bottom: 0.5rem; 
        }

        .title-line::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 80%; 
            height: 6px;
            background-color: #f97316; /* Color de la línea (Accent Orange) */
            border-radius: 9999px; 
        }

        /* Estilo para items del menú */
        .menu-item-row {
            transition: background-color 0.2s;
            display: flex; 
            flex-direction: column; 
            padding-top: 1rem;
            padding-bottom: 1rem;
            cursor: pointer; 
        }
        .menu-item-row:hover {
            background-color: #fff7ed; 
        }
        
        /* Contenedor de texto/precio */
        .menu-item-text-container {
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .menu-item-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start; 
            width: 100%;
        }

        /* Estilos del Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* Oculto por defecto */
            justify-content: center;
            align-items: center;
            z-index: 1000; 
            overflow-y: auto; 
            padding: 1rem;
        }

        .modal-content {
            background-color: white;
            border-radius: 1rem;
            max-width: 90%;
            width: 400px;
            overflow: hidden; 
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            animation: slide-up 0.3s ease-out;
            margin-top: auto; 
            margin-bottom: auto; 
        }
        
        /* Nuevo estilo para la imagen del modal: más alta y centrada */
        #modal-product-image {
            height: 250px; 
        }

        /* Estilo para aplicar blur al fondo cuando el modal está activo */
        .body-blur-active {
            filter: blur(5px);
            pointer-events: none; 
            transition: filter 0.3s ease-in-out;
        }

        /* Clase para el contenido principal que se blurea */
        .main-content {
            transition: filter 0.3s ease-in-out;
        }


        @keyframes slide-up {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* Contenedor Flex para el título de las categorías + GIF */
        .category-title-container {
            display: flex;
            align-items: center; /* CENTRA VERTICALMENTE EL GIF CON EL TEXTO */
            gap: 1rem;
            margin-bottom: 0.5rem; /* Ajustado para compensar el padding de title-line */
        }
        /* Clase para quitar el margin-bottom de los h3 que están dentro del contenedor flex */
        .category-title-container .title-line {
            margin-bottom: 0;
        }

        /* Estilos para el botón flotante del carrito/WhatsApp */
        #whatsapp-cart-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #25D366; /* WhatsApp Green */
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            z-index: 990; /* Just below the modal (1000) */
        }

        #whatsapp-cart-btn:hover {
            background-color: #1DA851;
            transform: scale(1.1);
        }

        /* Contador de artículos en el carrito */
        #order-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ea580c; /* primary-orange */
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            font-weight: bold;
            line-height: 1;
            min-width: 20px;
            text-align: center;
        }
    </style>
</head>
<body class="font-sans dynamic-bg text-gray-800">

    <!-- BOTÓN FLOTANTE DE WHATSAPP / CARRITO -->
    <button id="whatsapp-cart-btn" onclick="generateWhatsappLink()">
        <!-- Ícono de WhatsApp (SVG simple) -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" class="w-6 h-6">
            <path d="M380.9 97.1c-13.6-28.7-33.3-52.9-56.3-72.3C293.9 14.8 259.8 0 224 0c-35.8 0-69.9 14.8-95.6 42.8-23 19.4-42.7 43.6-56.3 72.3C47.8 131 39.5 163 39.5 197.8c0 29.5 8.3 58.1 24.6 83.3l-24.3 89.2 91.8-25.1c25.2 15.6 54.4 24.2 84.4 24.2 85.8 0 155.5-69.7 155.5-155.5 0-34.8-8.3-66.8-24.6-95.5zM224 430c-26.6 0-52.4-7.5-74.9-21.7L96 426.3l16.1-59.4c-15.8-24.8-24.4-53.7-24.4-83.3 0-69 56.1-125.1 125.1-125.1 33 0 63.8 13.1 87.2 36.5 23.4 23.4 36.5 54.2 36.5 87.2 0 69-56.1 125.1-125.1 125.1zM342.3 189.6c-2.4-2.4-5.4-3.6-8.5-3.6-3.1 0-6.1 1.2-8.5 3.6-2.4 2.4-3.6 5.4-3.6 8.5v35.3c0 3.1 1.2 6.1 3.6 8.5 2.4 2.4 5.4 3.6 8.5 3.6h35.3c3.1 0 6.1-1.2 8.5-3.6 2.4-2.4 3.6-5.4 3.6-8.5V198.1c0-3.1-1.2-6.1-3.6-8.5z"/>
        </svg>
        <span id="order-count" class="hidden">0</span>
    </button>
    

    <!-- CONTENEDOR PRINCIPAL QUE APLICARÁ EL BLUR -->
    <div id="main-page-content" class="main-content">
        <!-- 1. Navegación Fija con Efecto Blur -->
        <header class="sticky top-0 z-50 blur-nav">
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
                <div class="text-2xl font-bold text-primary-orange">
                    🥪 La Alhambra
                </div>
                <div class="flex space-x-4">
                    <a href="#menu" class="text-gray-700 hover:text-accent-orange font-medium transition duration-200">Menú</a>
                    <a href="#promos" class="text-gray-700 hover:text-accent-orange font-medium transition duration-200">Promociones</a>
                    <a href="#contacto" class="text-gray-700 hover:text-accent-orange font-medium transition duration-200">Contacto</a>
                </div>
            </nav>
        </header>

        <!-- 2. Sección Principal (Hero) ... (contenido omitido por brevedad, es el mismo) -->
        <section class="relative bg-primary-orange text-soft-white overflow-hidden py-16 sm:py-24 lg:py-32 shadow-xl">
            <div class="absolute inset-0 bg-primary-orange opacity-90"></div>
            
            <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <!-- Título Grande y Línea Fuerte: Nombre del Local -->
                <h1 class="title-line mx-auto text-5xl sm:text-7xl lg:text-8xl font-extrabold mb-6 leading-tight">
                    Sandwichería La Alhambra
                </h1>
                
                <p class="text-xl sm:text-2xl mb-10 max-w-3xl mx-auto font-light">
                    ¡Los mejores Lomitos, Milanesas y Hamburguesas de la ciudad! 
                </p>

                <!-- Botón de Llamada a la Acción -->
                <a href="#contacto" class="inline-block bg-accent-orange hover:bg-orange-700 text-white text-lg font-bold py-3 px-8 rounded-full transition duration-300 shadow-xl transform hover:scale-105">
                    ¡Hacé tu Pedido Ahora!
                </a>
            </div>
        </section>

        <!-- 3. Sección del Menú Principal -->
        <section id="menu" class="py-16 sm:py-24">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="title-line text-4xl sm:text-5xl font-bold text-gray-900 mb-12 mx-auto sm:ml-0 text-center">
                    Menú Principal
                </h2>
                
                <!-- Contenedor del Menú con Sombra y Borde Redondeado -->
                <div class="bg-white p-6 sm:p-10 rounded-2xl shadow-2xl border-4 border-orange-100 space-y-4">
                    
                    <!-- Categoría: LOMITOS -->
                    <div>
                        <h3 class="title-line text-3xl font-extrabold text-primary-orange mb-4 pb-1">LOMITOS</h3>
                        <p class="text-gray-500 mb-4 text-sm font-medium">Lomo de calidad acompañado de sus ingredientes frescos.</p>
                        
                        <ul class="divide-y divide-gray-200">
                            <!-- Lomito simple -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Lomito simple" 
                                data-price="$6.000" 
                                data-price-num="6000"
                                data-description="El clásico infaltable: bife de lomo, tomate, lechuga y mayonesa casera." 
                                data-image-url="https://placehold.co/400x300/f97316/ffffff?text=FOTO+LOMITO">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Lomito simple</span>
                                        <span class="text-xl font-bold text-accent-orange">$6.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">El clásico infaltable: bife de lomo, tomate, lechuga y mayonesa casera.</p>
                                </div>
                            </li>
                            <!-- Lomito completo -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Lomito completo" 
                                data-price="$6.500" 
                                data-price-num="6500"
                                data-description="La versión más pedida: con jamón, queso, huevo frito y todos los vegetales frescos." 
                                data-image-url="https://placehold.co/400x300/ea580c/ffffff?text=FOTO+LOMITO+COMPLETO">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Lomito completo</span>
                                        <span class="text-xl font-bold text-accent-orange">$6.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">La versión más pedida: con jamón, queso, huevo frito y todos los vegetales frescos.</p>
                                </div>
                            </li>
                            <!-- Lomito cheddar -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Lomito cheddar" 
                                data-price="$7.000" 
                                data-price-num="7000"
                                data-description="Bife de lomo cubierto con abundante salsa cheddar fundido." 
                                data-image-url="https://placehold.co/400x300/f97316/ffffff?text=FOTO+LOMITO+CHEDDAR">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Lomito cheddar</span>
                                        <span class="text-xl font-bold text-accent-orange">$7.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Bife de lomo cubierto con abundante salsa cheddar fundido.</p>
                                </div>
                            </li>
                            <!-- Lomito caramelizado -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Lomito caramelizado" 
                                data-price="$7.000" 
                                data-price-num="7000"
                                data-description="Bife de lomo tierno, queso fundido y cebolla caramelizada lentamente en un toque de dulce." 
                                data-image-url="https://placehold.co/400x300/ea580c/ffffff?text=FOTO+LOMITO+CARAMELIZADO">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Lomito caramelizado</span>
                                        <span class="text-xl font-bold text-accent-orange">$7.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Bife de lomo tierno, queso fundido y cebolla caramelizada lentamente en un toque de dulce.</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Separador -->
                    <div class="border-t border-orange-200 pt-4"></div>

                    <!-- Categoría: MILANESAS -->
                    <div>
                        <h3 class="title-line text-3xl font-extrabold text-primary-orange mb-4 pb-1">MILANESAS</h3>
                        <p class="text-gray-500 mb-4 text-sm font-medium">Milanesas **caseras**, rebozadas con un pan rallado especial para extra-crujiente.</p>
                        
                        <ul class="divide-y divide-gray-200">
                            <!-- Mila simple -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Mila simple" 
                                data-price="$5.300" 
                                data-price-num="5300"
                                data-description="Milanesa de carne (ternera), **rebozada a mano** con lechuga y tomate." 
                                data-image-url="https://placehold.co/400x300/f97316/ffffff?text=FOTO+MILA+SIMPLE">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Mila simple</span>
                                        <span class="text-xl font-bold text-accent-orange">$5.300</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Milanesa de carne (ternera), **rebozada a mano** con lechuga y tomate.</p>
                                </div>
                            </li>
                            <!-- Mila completa -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Mila completa" 
                                data-price="$6.000" 
                                data-price-num="6000"
                                data-description="Nuestra mila **extra crujiente** con jamón, queso, huevo frito y todos los vegetales frescos." 
                                data-image-url="https://placehold.co/400x300/ea580c/ffffff?text=FOTO+MILA+COMPLETA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Mila completa</span>
                                        <span class="text-xl font-bold text-accent-orange">$6.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Nuestra mila **extra crujiente** con jamón, queso, huevo frito y todos los vegetales frescos.</p>
                                </div>
                            </li>
                            <!-- Mila cheddar -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Mila cheddar" 
                                data-price="$6.500" 
                                data-price-num="6500"
                                data-description="Milanesa **rebozada a mano** cubierta en abundante salsa cheddar caliente." 
                                data-image-url="https://placehold.co/400x300/f97316/ffffff?text=FOTO+MILA+CHEDDAR">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Mila cheddar</span>
                                        <span class="text-xl font-bold text-accent-orange">$6.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Milanesa **rebozada a mano** cubierta en abundante salsa cheddar caliente.</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Separador -->
                    <div class="border-t border-orange-200 pt-4"></div>

                    <!-- Categoría: HAMBURGUESAS -->
                    <div class="mb-4"> <!-- mb-4 para separar del texto que sigue -->
                        <!-- Título con línea fuerte y GIF PEQUEÑO A LADO -->
                        <div class="category-title-container">
                             <h3 class="title-line text-3xl font-extrabold text-primary-orange pb-1">HAMBURGUESAS</h3>
                             <!-- GIF como icono de 48x48px (w-12 h-12) -->
                             <img src="https://raw.githubusercontent.com/Alhambrabm/Alhambra/refs/heads/main/Hamburguesas.gif" 
                                  alt="Hamburguesa Animada" 
                                  class="w-12 h-12 object-cover rounded-md shadow-lg transform hover:scale-110 transition duration-300">
                        </div>
                        
                        <p class="text-gray-500 mb-4 text-sm font-medium">Medallones caseros y frescos para un sabor inigualable.</p>

                        <ul class="divide-y divide-gray-200">
                            <!-- Hamburguesa común (IMAGEN FIJA RESTAURADA) -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Hamburguesa común" 
                                data-price="$4.000" 
                                data-price-num="4000"
                                data-description="Medallón de carne, lechuga, tomate y aderezos." 
                                data-image-url="https://raw.githubusercontent.com/Alhambrabm/Alhambra/refs/heads/main/images.jpeg">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Hamburguesa común</span>
                                        <span class="text-xl font-bold text-accent-orange">$4.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Medallón de carne, lechuga, tomate y aderezos.</p>
                                </div>
                            </li>
                            <!-- Hamburguesa completa -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Hamburguesa completa" 
                                data-price="$4.500" 
                                data-price-num="4500"
                                data-description="Carne, queso, jamón, huevo frito y vegetales frescos. Un clásico contundente." 
                                data-image-url="https://placehold.co/400x300/ea580c/ffffff?text=FOTO+HAMB+COMPLETA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Hamburguesa completa</span>
                                        <span class="text-xl font-bold text-accent-orange">$4.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Carne, queso, jamón, huevo frito y vegetales frescos. Un clásico contundente.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Separador -->
                    <div class="border-t border-orange-200 pt-4"></div>

                    <!-- Categoría: PAPAS ESPECIALES -->
                    <div class="mb-4"> <!-- mb-4 para separar del texto que sigue -->
                        <!-- Título con línea fuerte y GIF PEQUEÑO A LADO -->
                        <div class="category-title-container">
                            <h3 class="title-line text-3xl font-extrabold text-primary-orange pb-1">PAPAS ESPECIALES</h3>
                            <!-- GIF de Papas como icono de 48x48px (w-12 h-12) -->
                             <img src="https://raw.githubusercontent.com/Alhambrabm/Alhambra/refs/heads/main/Papas.gif" 
                                  alt="Papas Fritas Animadas" 
                                  class="w-12 h-12 object-cover rounded-md shadow-lg transform hover:scale-110 transition duration-300">
                        </div>

                        <p class="text-gray-500 mb-4 text-sm font-medium">Ideales para compartir, con toppings irresistibles.</p>

                        <ul class="divide-y divide-gray-200">
                            <!-- Papas Cheddar -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Papas con Cheddar" 
                                data-price="$3.500" 
                                data-price-num="3500"
                                data-description="Porción de papas fritas bañadas en cremoso queso cheddar fundido." 
                                data-image-url="https://placehold.co/400x300/facc15/000000?text=FOTO+PAPAS+CHEDDAR">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Papas con Cheddar</span>
                                        <span class="text-xl font-bold text-accent-orange">$3.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Porción de papas fritas bañadas en cremoso queso cheddar fundido.</p>
                                </div>
                            </li>
                            <!-- Papas Verdeo -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Papas al Verdeo" 
                                data-price="$3.500" 
                                data-price-num="3500"
                                data-description="Papas fritas con un toque fresco y aromático de cebolla de verdeo picada." 
                                data-image-url="https://placehold.co/400x300/34d399/000000?text=FOTO+PAPAS+VERDEO">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Papas al Verdeo</span>
                                        <span class="text-xl font-bold text-accent-orange">$3.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Papas fritas con un toque fresco y aromático de cebolla de verdeo picada.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Separador -->
                    <div class="border-t border-orange-200 pt-4"></div>

                    <!-- Categoría: BEBIDAS (Comprimida) -->
                    <div>
                        <!-- Título con línea fuerte -->
                        <h3 class="title-line text-3xl font-extrabold text-primary-orange mb-4 pb-1">BEBIDAS</h3>
                        <p class="text-gray-500 mb-4 text-sm font-medium">El acompañamiento perfecto para tu sánguche.</p>

                        <ul id="beverageList" class="divide-y divide-gray-200">
                            
                            <!-- SECCIÓN GASEOSAS Y AGUA -->
                            <div class="border-t border-orange-100 pt-4 mt-4">
                                <h4 class="text-xl font-extrabold text-primary-orange mb-2">Gaseosas y Agua</h4>
                            </div>
                            
                            <!-- Gaseosas (375cc) y Agua -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Gaseosas (375cc)" 
                                data-price="$2.000" 
                                data-price-num="2000"
                                data-description="Fanta, Sprite, Coca-Cola. (Agua $1.500)"
                                data-image-url="https://placehold.co/400x300/06b6d4/ffffff?text=FOTO+BEBIDA">
                                <div class="menu-item-text-container ml-0"> 
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Gaseosas (375cc)</span>
                                        <span class="text-xl font-bold text-accent-orange">$2.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Fanta, Sprite, Coca-Cola. (Agua $1.500)</p>
                                </div>
                            </li>

                            <!-- Gaseosas (1Lt) -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Gaseosas (1Lt)" 
                                data-price="$3.500" 
                                data-price-num="3500"
                                data-description="Coca Común, Coca Zero, Fanta, Sprite."
                                data-image-url="https://placehold.co/400x300/06b6d4/ffffff?text=FOTO+BEBIDA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Gaseosas (1Lt)</span>
                                        <span class="text-xl font-bold text-accent-orange">$3.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Coca Común, Coca Zero, Fanta, Sprite.</p>
                                </div>
                            </li>

                            <!-- SECCIÓN CERVEZAS RUBLAS Y CLÁSICAS -->
                            <div class="border-t border-orange-100 pt-4 mt-4">
                                <h4 class="text-xl font-extrabold text-primary-orange mb-2">Cervezas (Rubias y Clásicas)</h4>
                            </div>
                            
                            <!-- Cerveza Pampa Dorada -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Pampa Dorada" 
                                data-price="$4.300" 
                                data-price-num="4300"
                                data-description="Cerveza rubia clásica de sabor ligero."
                                data-image-url="https://placehold.co/400x300/facc15/000000?text=FOTO+CERVEZA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Pampa Dorada</span>
                                        <span class="text-xl font-bold text-accent-orange">$4.300</span>
                                    </div>
                                    <!-- Descripción corregida al menú principal -->
                                    <p class="text-sm text-gray-600 mt-1">Rubia clásica y refrescante.</p>
                                </div>
                            </li>
                            <!-- Cerveza Salta Rubia x 473 -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Salta Rubia (473cc)" 
                                data-price="$4.300" 
                                data-price-num="4300"
                                data-description="Rubia clásica de cuerpo y sabor equilibrado."
                                data-image-url="https://placehold.co/400x300/facc15/000000?text=FOTO+SALTA+RUBIA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Salta Rubia (473cc)</span>
                                        <span class="text-xl font-bold text-accent-orange">$4.300</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Rubia de cuerpo y sabor equilibrado.</p>
                                </div>
                            </li>
                            
                            <!-- Cerveza Budweiser x 710 -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Budweiser (710cc)" 
                                data-price="$5.500" 
                                data-price-num="5500"
                                data-description="La mejor opción para acompañar tu sánguche."
                                data-image-url="https://placehold.co/400x300/facc15/000000?text=FOTO+CERVEZA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Budweiser (710cc)</span>
                                        <span class="text-xl font-bold text-accent-orange">$5.500</span>
                                    </div>
                                    <!-- Descripción corregida al menú principal -->
                                    <p class="text-sm text-gray-600 mt-1">Rubia clásica en botella de 710 cc.</p>
                                </div>
                            </li>
                            <!-- Cerveza Corona x 710 -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Corona (710cc)" 
                                data-price="$6.500" 
                                data-price-num="6500"
                                data-description="Corona bien fría, con su rodaja de lima."
                                data-image-url="https://placehold.co/400x300/facc15/000000?text=FOTO+CERVEZA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Corona (710cc)</span>
                                        <span class="text-xl font-bold text-accent-orange">$6.500</span>
                                    </div>
                                    <!-- Descripción corregida al menú principal -->
                                    <p class="text-sm text-gray-600 mt-1">Cerveza importada en botella de 710 cc.</p>
                                </div>
                            </li>

                            <!-- SECCIÓN CERVEZAS NEGRAS -->
                            <div class="border-t border-orange-100 pt-4 mt-4">
                                <h4 class="text-xl font-extrabold text-primary-orange mb-2">Cervezas Negras</h4>
                            </div>
                            
                            <!-- Cerveza Salta Negra x 473 -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Salta Negra (473cc)" 
                                data-price="$4.500" 
                                data-price-num="4500"
                                data-description="De malta tostada y sabor intenso."
                                data-image-url="https://placehold.co/400x300/1f2937/ffffff?text=FOTO+CERVEZA+NEGRA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Salta Negra (473cc)</span>
                                        <span class="text-xl font-bold text-accent-orange">$4.500</span>
                                    </div>
                                    <!-- Descripción corregida al menú principal -->
                                    <p class="text-sm text-gray-600 mt-1">De malta tostada en lata de 473 cc.</p>
                                </div>
                            </li>
                            <!-- Cerveza Guinness -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Guinness" 
                                data-price="$4.500" 
                                data-price-num="4500"
                                data-description="La stout más famosa del mundo, cremosa y de cuerpo robusto."
                                data-image-url="https://placehold.co/400x300/1f2937/ffffff?text=FOTO+CERVEZA+NEGRA">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Guinness</span>
                                        <span class="text-xl font-bold text-accent-orange">$4.500</span>
                                    </div>
                                    <!-- Descripción corregida al menú principal -->
                                    <p class="text-sm text-gray-600 mt-1">Stout cremosa y robusta.</p>
                                </div>
                            </li>


                            <!-- SECCIÓN VINOS Y OTROS -->
                            <div class="border-t border-orange-100 pt-4 mt-4">
                                <h4 class="text-xl font-extrabold text-primary-orange mb-2">Vinos y Otros</h4>
                            </div>

                            <!-- Vinos Tinto/Blanco -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Don Valentín (750cc)" 
                                data-price="$7.500" 
                                data-price-num="7500"
                                data-description="Vino tinto (Malbec/Cabernet) o blanco."
                                data-image-url="https://placehold.co/400x300/991b1b/ffffff?text=FOTO+VINO">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Don Valentín (750cc)</span>
                                        <span class="text-xl font-bold text-accent-orange">$7.500</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Malbec, Cabernet o Blanco. Botella de 750 cc.</p>
                                </div>
                            </li>
                            
                            <!-- Fernet Vaso -->
                            <li class="menu-item-row" onclick="showProductModal(this)"
                                data-name="Fernet (Vaso)" 
                                data-price="$5.000" 
                                data-price-num="5000"
                                data-description="Fernet con Coca Cola. ¡Listo para disfrutar!"
                                data-image-url="https://placehold.co/400x300/4c0519/ffffff?text=FOTO+FERNET">
                                <div class="menu-item-text-container ml-0">
                                    <div class="menu-item-content">
                                        <span class="text-lg font-semibold text-gray-900">Fernet (Vaso)</span>
                                        <span class="text-xl font-bold text-accent-orange">$5.000</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Con Coca Cola. ¡Listo para disfrutar!</p>
                                </div>
                            </li>
                            
                        </ul>
                    </div>


                </div>
                
            </div>
        </section>

        <!-- 4. Sección de Promociones (REDISÑADA CON TARJETAS LLAMATIVAS) -->
        <section id="promos" class="py-16 sm:py-24 bg-gray-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="title-line text-4xl sm:text-5xl font-bold text-gray-900 mb-12 mx-auto text-center">
                    Promociones
                </h2>
                
                <!-- Contenedor de Promos en Grid (2 columnas en desktop, 1 en móvil) -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    
                    <!-- Promo Card 1: 2 Lomitos Simples -->
                    <div class="bg-white p-6 rounded-2xl shadow-2xl border-b-8 border-primary-orange transform hover:scale-[1.02] transition duration-300">
                        <p class="text-xs font-bold text-white bg-highlight-yellow text-gray-900 inline-block px-3 py-1 rounded-full mb-3 shadow-md">⭐ EL MÁS VENDIDO</p>
                        <h3 class="text-2xl font-extrabold text-gray-900 mb-1">2 Lomitos Simples</h3>
                        <p class="text-gray-600 mb-4">El doble del sabor que amas. Disfruta de la calidad del lomo con nuestra mayonesa casera. ¡Simplemente insuperable!</p>
                        <div class="flex justify-between items-end">
                            <span class="text-sm line-through text-gray-500">$12.000</span> <!-- (6000*2) -->
                            <span class="text-5xl font-black text-primary-orange">$10.000</span>
                        </div>
                    </div>

                    <!-- Promo Card 2: 2 Lomitos Completos -->
                    <div class="bg-white p-6 rounded-2xl shadow-2xl border-b-8 border-accent-orange transform hover:scale-[1.02] transition duration-300">
                        <p class="text-xs font-bold text-white bg-primary-orange inline-block px-3 py-1 rounded-full mb-3 shadow-md">OFERTA FAMILIAR</p>
                        <h3 class="text-2xl font-extrabold text-gray-900 mb-1">2 Lomitos Completos</h3>
                        <p class="text-gray-600 mb-4">El sándwich ideal para compartir: lomo, jamón, queso, huevo y vegetales. ¡El combo más potente y rendidor!</p>
                        <div class="flex justify-between items-end">
                            <span class="text-sm line-through text-gray-500">$13.000</span> <!-- (6500*2) -->
                            <span class="text-5xl font-black text-primary-orange">$12.000</span>
                        </div>
                    </div>
                    
                    <!-- Promo Card 3: 2 Milas Comunes -->
                    <div class="bg-white p-6 rounded-2xl shadow-2xl border-b-8 border-primary-orange transform hover:scale-[1.02] transition duration-300">
                        <p class="text-xs font-bold text-white bg-highlight-yellow text-gray-900 inline-block px-3 py-1 rounded-full mb-3 shadow-md">CRUJIENTE DÚO</p>
                        <h3 class="text-2xl font-extrabold text-gray-900 mb-1">2 Milas Comunes</h3>
                        <p class="text-gray-600 mb-4">¡Doble porción de sabor! Milanesas **rebozadas a mano**, extra crujientes gracias a nuestro pan rallado especial.</p>
                        <div class="flex justify-between items-end">
                            <span class="text-sm line-through text-gray-500">$10.600</span> <!-- (5300*2) -->
                            <span class="text-5xl font-black text-primary-orange">$9.000</span>
                        </div>
                    </div>

                    <!-- Promo Card 4: 2 Milas Completas -->
                    <div class="bg-white p-6 rounded-2xl shadow-2xl border-b-8 border-accent-orange transform hover:scale-[1.02] transition duration-300">
                        <p class="text-xs font-bold text-white bg-primary-orange inline-block px-3 py-1 rounded-full mb-3 shadow-md">MÁXIMO AHORRO</p>
                        <h3 class="text-2xl font-extrabold text-gray-900 mb-1">2 Milas Completas</h3>
                        <p class="text-gray-600 mb-4">El placer de la milanesa **crujiente y casera** combinada con jamón, queso y huevo. ¡Una oferta contundente que no defrauda!</p>
                        <div class="flex justify-between items-end">
                            <span class="text-sm line-through text-gray-500">$12.000</span> <!-- (6000*2) -->
                            <span class="text-5xl font-black text-primary-orange">$11.000</span>
                        </div>
                    </div>

                    <!-- Promo Card 5: 2 Lomitos Cheddar/Caramelizado -->
                    <div class="bg-white p-6 rounded-2xl shadow-2xl border-b-8 border-primary-orange transform hover:scale-[1.02] transition duration-300 md:col-span-2 lg:col-span-1 mx-auto w-full md:w-1/2 lg:w-full">
                        <p class="text-xs font-bold text-white bg-red-600 inline-block px-3 py-1 rounded-full mb-3 shadow-md">🔥 PROMO PREMIUM</p>
                        <h3 class="text-2xl font-extrabold text-gray-900 mb-1">2 Lomitos TOP</h3>
                        <p class="text-gray-600 mb-4">¡La explosión de sabor! Elegí combinar entre el intenso Cheddar fundido o la suavidad de la Cebolla Caramelizada.</p>
                        <div class="flex justify-between items-end">
                            <span class="text-sm line-through text-gray-500">$14.000</span> <!-- (7000*2) -->
                            <span class="text-5xl font-black text-primary-orange">$13.000</span>
                        </div>
                    </div>
                </div>

            </div>
        </section>
        
        <!-- Énfasis en las Fritas antes del Pedido -->
        <section class="bg-highlight-yellow py-8 text-gray-900 text-center shadow-inner">
            <div class="max-w-4xl mx-auto px-4">
                <p class="text-3xl sm:text-4xl font-extrabold tracking-tight uppercase">
                    Todo sale con fritas 🍟
                </p>
            </div>
        </section>

        <!-- 5. Sección de Contacto -->
        <section id="contacto" class="py-16 bg-gray-100">
            <div class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="title-line text-4xl font-bold text-gray-900 mb-6 mx-auto">
                    ¡Hacé tu Pedido!
                </h2>
                <p class="text-xl text-gray-600 mb-8">
                    Elige tu método de contacto preferido.
                </p>
                
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 justify-center">
                    <!-- Botón de WhatsApp (Placeholder para pedido directo) -->
                    <!-- Se actualiza el enlace estático -->
                    <a href="https://wa.me/5491166631401?text=¡Hola!%20Quiero%20hacer%20un%20pedido%20de%20La%20Alhambra." target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-green-500 hover:bg-green-600 text-white text-lg font-bold py-3 px-8 rounded-xl transition duration-300 shadow-md transform hover:scale-105">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.75-4.25 8.75-9 8.75S3 16.75 3 12 7.25 3.25 12 3.25 21 7.25 21 12z"></path></svg>
                        Enviar WhatsApp
                    </a>

                    <!-- Botón de Llamada -->
                    <a href="tel:5491166631401" class="inline-flex items-center justify-center bg-primary-orange hover:bg-accent-orange text-white text-lg font-bold py-3 px-8 rounded-xl transition duration-300 shadow-md transform hover:scale-105">
                        <!-- Icono de Teléfono -->
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                        Llamar al Local
                    </a>
                </div>

                <!-- Enlace a Google Maps -->
                <a href="https://maps.app.goo.gl/Mx5jW3gKrm2YEN5y5" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-primary-orange pt-6 block font-medium underline transition duration-200">
                    Ver Ubicación en Google Maps
                </a>

            </div>
        </section>

        <!-- 6. Footer -->
        <footer class="bg-gray-900 text-gray-300 py-8">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
                &copy; 2025 Sandwichería La Alhambra
            </div>
        </footer>
    </div> <!-- Fin de #main-page-content -->

    <!-- MODAL DE PRODUCTO (Ventana Emergente) -->
    <div id="product-modal-overlay" class="modal-overlay">
        <!-- Contenido del Modal -->
        <div id="product-modal-content" class="modal-content">
            <!-- La imagen y el contenido se inyectarán/restaurarán aquí -->
            <img id="modal-product-image" class="w-full object-cover rounded-t-xl bg-gray-200" alt="Imagen del Producto" src="">
            
            <div class="p-6">
                <!-- Título del Producto -->
                <h3 id="modal-product-name" class="text-3xl font-extrabold text-gray-900 mb-3"></h3>
                
                <!-- Descripción -->
                <p id="modal-product-description" class="text-gray-600 mb-4"></p>
                
                <!-- Precio y Control de Cantidad (NUEVA SECCIÓN) -->
                <div class="flex flex-col space-y-4 border-t pt-4 border-orange-200">
                    <div class="flex justify-between items-center">
                        <span class="text-lg font-semibold text-gray-800">Precio unitario:</span>
                        <span id="modal-product-price" class="text-3xl font-black text-accent-orange"></span>
                        <input type="hidden" id="modal-product-price-num" value="0">
                    </div>

                    <!-- Quantity Selector -->
                    <div class="flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200">
                        <span class="text-lg font-semibold text-gray-800">Cantidad:</span>
                        <div class="flex items-center space-x-3">
                            <button onclick="decrementQuantity()" class="w-8 h-8 flex items-center justify-center bg-gray-200 text-gray-800 rounded-full font-bold text-xl hover:bg-gray-300 transition duration-150 shadow-sm">
                                -
                            </button>
                            <span id="modal-quantity" class="text-2xl font-bold text-gray-900 w-8 text-center">1</span>
                            <button onclick="incrementQuantity()" class="w-8 h-8 flex items-center justify-center bg-primary-orange text-white rounded-full font-bold text-xl hover:bg-accent-orange transition duration-150 shadow-md">
                                +
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Botón de Agregar al Pedido (ACCIÓN PRINCIPAL) -->
                <button onclick="addToOrder()" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl transition duration-200 shadow-md transform hover:scale-[1.01]">
                    Agregar al Pedido
                </button>
                
                <!-- Botón de Cerrar (SECUNDARIO) -->
                <button onclick="hideProductModal()" class="mt-3 w-full bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-4 rounded-xl transition duration-200 shadow-sm">
                    Cerrar / Cancelar
                </button>
            </div>
        </div>
    </div>


    <script>
        // --- VARIABLES GLOBALES DEL PEDIDO ---
        let initialModalContentHTML = '';
        let currentQuantity = 1;
        
        // Array principal que almacena el pedido del usuario
        let order = [];
        // NÚMERO DE WHATSAPP ACTUALIZADO
        const WHATSAPP_NUMBER = "5491166631401"; 
        
        // --- FUNCIONES DE UTILIDAD ---

        // Función para actualizar el contador flotante del carrito
        function updateOrderCount() {
            const count = order.reduce((total, item) => total + item.quantity, 0);
            const countElement = document.getElementById('order-count');
            
            countElement.innerText = count;
            if (count > 0) {
                countElement.classList.remove('hidden');
                document.getElementById('whatsapp-cart-btn').classList.add('animate-bounce'); // Efecto para llamar la atención
                setTimeout(() => {
                    document.getElementById('whatsapp-cart-btn').classList.remove('animate-bounce');
                }, 500);
            } else {
                countElement.classList.add('hidden');
            }
        }
        
        // Función para formatear números como moneda (ej: 6000 -> $6.000)
        function formatPrice(number) {
            if (typeof number !== 'number' || isNaN(number)) return '$0';
            return new Intl.NumberFormat('es-AR', {
                style: 'currency',
                currency: 'ARS',
                minimumFractionDigits: 0,
            }).format(number).replace('ARS', '$').trim();
        }

        // --- LÓGICA DEL MODAL ---

        function incrementQuantity() {
            currentQuantity++;
            document.getElementById('modal-quantity').innerText = currentQuantity;
        }

        function decrementQuantity() {
            if (currentQuantity > 1) {
                currentQuantity--;
                document.getElementById('modal-quantity').innerText = currentQuantity;
            }
        }
        
        function addToOrder() {
            const name = document.getElementById('modal-product-name').innerText;
            const priceNum = parseFloat(document.getElementById('modal-product-price-num').value);
            const quantity = currentQuantity;
            
            // Crear el objeto del item
            const newItem = {
                name: name,
                quantity: quantity,
                price_num: priceNum
            };
            
            // 1. Agregar el item al pedido
            order.push(newItem);
            
            // 2. Actualizar el contador del carrito
            updateOrderCount();
            
            // 3. Mostrar un mensaje de confirmación dentro del modal
            const modalContent = document.getElementById('product-modal-content');
            
            // Guardamos el HTML original solo una vez
            if (!initialModalContentHTML) {
                initialModalContentHTML = modalContent.querySelector('.p-6').innerHTML;
            }
            
            // Precio del subtotal
            const subtotal = formatPrice(priceNum * quantity);

            const tempConfirmationHTML = `
                <div class="p-8 text-center">
                    <h3 class="text-3xl font-extrabold text-green-600 mb-3">¡Añadido! 🎉</h3>
                    <p class="text-lg text-gray-600 mb-2">
                        Has agregado *${quantity} x ${name}* al pedido.
                    </p>
                    <p class="text-xl font-bold text-gray-800 mb-6">
                        Subtotal: ${subtotal}
                    </p>
                    <button onclick="hideProductModal(true)" class="w-full bg-primary-orange hover:bg-accent-orange text-white font-bold py-3 px-4 rounded-xl transition duration-200 shadow-md">
                        Seguir Comprando
                    </button>
                    <button onclick="generateWhatsappLink()" class="mt-3 w-full bg-whatsapp-green hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl transition duration-200 shadow-md">
                        Finalizar Pedido (Ir a WhatsApp)
                    </button>
                </div>
            `;
            
            modalContent.querySelector('.p-6').innerHTML = tempConfirmationHTML;

            // 4. No cerramos automáticamente, damos opciones al usuario
        }


        function showProductModal(element) {
            const p6Content = document.getElementById('product-modal-content').querySelector('.p-6');
            if (!initialModalContentHTML) {
                initialModalContentHTML = p6Content.innerHTML;
            } else {
                p6Content.innerHTML = initialModalContentHTML; // Restaurar el contenido original
            }
            
            // 1. Obtener datos y convertir precio a número
            const name = element.getAttribute('data-name');
            const price = element.getAttribute('data-price'); // ej: $6.000
            const priceNum = parseFloat(element.getAttribute('data-price-num')); // ej: 6000
            const description = element.getAttribute('data-description');
            const imageUrl = element.getAttribute('data-image-url');
            
            const finalDescription = description || "Sin descripción adicional.";

            // Resetear la cantidad al abrir el modal y actualizar el display
            currentQuantity = 1; 
            const quantityDisplay = document.getElementById('modal-quantity');
            if (quantityDisplay) {
                quantityDisplay.innerText = currentQuantity;
            }
            
            // 2. Insertar los datos en el modal
            document.getElementById('modal-product-name').innerText = name;
            document.getElementById('modal-product-price').innerText = price;
            document.getElementById('modal-product-price-num').value = priceNum; // Guardar el valor numérico
            document.getElementById('modal-product-description').innerText = finalDescription;
            
            // Imagen con fallback
            const modalImage = document.getElementById('modal-product-image');
            modalImage.src = imageUrl;
            modalImage.alt = name;
            modalImage.onerror = () => {
                modalImage.src = 'https://placehold.co/400x250/cccccc/333333?text=IMAGEN+NO+DISPONIBLE';
                console.error(`Error al cargar la imagen: ${imageUrl}`);
            };

            // 3. Mostrar el modal
            const modalOverlay = document.getElementById('product-modal-overlay');
            const mainContent = document.getElementById('main-page-content');
            
            modalOverlay.style.display = 'flex';
            mainContent.classList.add('body-blur-active'); 
            document.body.classList.add('overflow-hidden'); 

            // 4. Configurar el cierre solo al hacer clic en el fondo oscuro
            modalOverlay.onclick = function(event) {
                if (event.target === modalOverlay) {
                    hideProductModal(true); // Usar true para asegurar la restauración
                }
            };
        }

        function hideProductModal(restoreContent = false) {
            document.getElementById('product-modal-overlay').style.display = 'none';
            document.getElementById('main-page-content').classList.remove('body-blur-active'); 
            document.body.classList.remove('overflow-hidden'); 
            
            // Restaurar el contenido si se cerró después de una confirmación
            if (restoreContent && initialModalContentHTML) {
                document.getElementById('product-modal-content').querySelector('.p-6').innerHTML = initialModalContentHTML;
            }
        }


        // --- LÓGICA DE WHATSAPP ---

        function generateWhatsappLink() {
            if (order.length === 0) {
                // Si está vacío, redirige al enlace de contacto general
                window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=¡Hola!%20Quiero%20hacer%20un%20pedido%20de%20La%20Alhambra.`, '_blank');
                return;
            }

            let total = 0;
            let message = "*¡Hola, mi pedido de La Alhambra es el siguiente!* \n\n";
            message += "__Detalle del Pedido:__\n";
            
            // Generar la lista de items
            order.forEach((item, index) => {
                const subtotal = item.quantity * item.price_num;
                total += subtotal;
                
                // Formato WhatsApp: *Cantidad* x Producto
                message += `\n*${item.quantity}* x ${item.name}`;
            });
            
            // Total
            message += "\n\n---";
            message += `\n*TOTAL ESTIMADO: ${formatPrice(total)}*`;
            message += "\n---";
            message += "\n\n_Por favor, confirma el total y la forma de envío/retiro. ¡Gracias!_";

            // Mostrar el mensaje en consola para debug y luego abrir el enlace
            console.log("Mensaje de WhatsApp generado:", message);
            
            // Codificar el mensaje para la URL
            const encodedMessage = encodeURIComponent(message);
            const whatsappLink = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            // Abrir WhatsApp
            window.open(whatsappLink, '_blank');
            
            // Opcional: limpiar el pedido después de enviar (o pedir confirmación)
            // order = [];
            // updateOrderCount();
        }
        
        // Inicializar el contador al cargar
        window.onload = updateOrderCount;

    </script>
</body>
</html>

